{% extends "layout.html" %}

{% block title %}
    Register
{% endblock %}

{% block main %}
     <div class="card px-sm-4 mt-2 login-card hv-center shadow">
      <form class="p-2" action="/register" method="post">

        <div class="form-group text-left mt-3">
          <label class="font-weight-bold">Username for login</label>
          <input type="text"
            class="form-control"
            name="username"
            id="username"
            placeholder="Enter your username"
            required
            minlength = "3"
          />
        </div>

        <div class="form-group text-left mt-4">
          <label class="font-weight-bold">Password</label>
          <input type="password"
            class="form-control"
            id="password"
            name="password"
            placeholder="Password"
            required
            minlength = "4"
            onkeyup="checkPass();"
          />
        </div>

        <div class="form-group text-left mt-4">
          <label class="font-weight-bold">Confirm your password</label>
          <input type="password"
            onkeyup="checkPass();"
            class="form-control"
            id="passwordConfirm"
            name="passwordConfirm"
            placeholder="Confirm your password"
            required
            minlength = "4"
          />
        </div>
        <span id="confirm-message2" class="confirm-message">?</span>
        <button
          id="register_btn"
          type="submit"
          class="btn btn-block btn-dark mb-5 mt-2 px-5 py-3 submitBtn"
          disabled>
          REGISTER
        </button>
        <div class="d-flex justify-content-between align-items-center">
          <p class = 'my-2 text-muted'>Do you already have an account?</p>
          <a
            href = "login"
            role ="button"
            class = "btn btn-info my-2 px-4 save-btn"
            type = "button">
            Log in here
          </a>
        </div>
      </form>
    </div>
{% endblock %}

{% block script %}
<script type="text/javascript">
function checkPass()
{
    //https://keithhatfield.com/blog/simple-javascript-password-validation/
    //Simple validation for passowrd confirmation with small message. It works on keyup, and notifies user as long as the passwords do not match
    //Store the password field objects into variables ...
    let password = document.getElementById('password');
    let confirm  = document.getElementById('passwordConfirm');
    let message = document.getElementById('confirm-message2');
    let submit_btn = document.getElementById('register_btn')
    //Store the Confirmation Message Object ...

    //Compare the values in the password field
    //and the confirmation field
    let good_color = "#ffffff";
    let bad_color  = "#ff6666";
    //Compare the values in the password field
    //and the confirmation field
    if(password.value == confirm.value){
        //The passwords match.
        //Set the color to the good color and inform
        //the user that they have entered the correct password
        message.style.color           = good_color;
        message.innerHTML             = 'Passwords Match!';
        submit_btn.removeAttribute('disabled');
    }else{
        //The passwords do not match.
        //Set the color to the bad color and
        //notify the user.
        message.style.color           = bad_color;
        message.innerHTML             = 'Passwords Do Not Match!';
        submit_btn.setAttribute('disabled', 'disabled');
    }
    if (password.value.length==0)
    {
        submit_btn.setAttribute('disabled', 'disabled');
    }
}
</script>
{% endblock %}
